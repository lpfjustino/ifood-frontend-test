(window.webpackJsonpspotifood=window.webpackJsonpspotifood||[]).push([[0],{124:function(e,t,n){"use strict";(function(e){var a=n(136),r=Object(a.a)(e);t.a=r}).call(this,n(54))},133:function(e,t,n){e.exports=n.p+"static/media/logo.819894ce.png"},136:function(e,t,n){"use strict";var a=n(34),r=n(125),i=n(126),c=n(3),l=n(13),o=n.n(l),s=n(20),u=n(44);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m={values:{}};function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v={accessToken:null,playlists:[]},b=Object(a.c)({filters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"".concat(s.b,"_FULFILLED"):var n=o.a.get(t,"payload.data.filters",m.filters);return p({},e,{},Object(u.a)(n));case s.d:var a=t.payload,r=a.field,i=a.value;return p({},e,{values:p({},e.values,Object(c.a)({},r,i))});default:return p({},e)}},spotify:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.c:return d({},e,{accessToken:t.payload.token});case"".concat(s.a,"_FULFILLED"):var n=o.a.get(t.payload,"data.playlists.items",[]);return d({},e,{playlists:n});default:return d({},e)}}});t.a=function(){return Object(a.d)(Object(a.a)(r.a,i.a))(a.e)(b)}},137:function(e,t,n){e.exports=n(262)},142:function(e,t,n){},20:function(e){e.exports=JSON.parse('{"b":"GET_TRENDING_PLAYLISTS_FILTERS","c":"SET_ACCESS_TOKEN","d":"SET_FILTER","a":"FETCH_FEATURED_PLAYLISTS"}')},262:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(21),c=n.n(i),l=(n(142),n(7)),o=n(8),s=n(9),u=n(10),f=n(11),p=n(33),m=n(124),h=n(20),d=n(61),v=n.n(d),b=n(44),y={setAccessToken:function(e){return{type:h.c,payload:{token:e}}},fetchFeaturedPlaylists:function(e,t){var n={Authorization:"Bearer ".concat(e)},a=Object(b.b)(t),r="".concat("https://api.spotify.com/v1/browse/featured-playlists","?").concat(a);return{type:h.a,payload:{promise:v.a.get(r,{headers:n})}}}},O=n(1),j=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).clearExpiredToken=n.clearExpiredToken.bind(Object(O.a)(n)),n}return Object(f.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.accessToken,n=e.setAccessToken,a=Object(b.c)(window.location.hash),r=a.access_token,i=a.expires_in;!t&&r&&n(r),i&&setTimeout(this.clearExpiredToken,1e3*i)}},{key:"clearExpiredToken",value:function(){this.props.setAccessToken(null)}},{key:"getLoginURL",value:function(){return"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("91a84a82e4e34192a860659488ce3ecf","&redirect_uri=").concat("http://lpfjustino.github.io/ifood-frontend-test","&response_type=token&show_dialog=true")}},{key:"render",value:function(){return!this.props.accessToken&&r.a.createElement("div",{className:"login-container"},r.a.createElement("span",{className:"login-request"},"Please log in using your Spotify account to be able to see the playlists"," "),r.a.createElement("a",{href:this.getLoginURL(),className:"button"},"Login"))}}]),t}(a.Component);var g=Object(p.b)((function(e){return{accessToken:e.spotify.accessToken}}),(function(e){return{setAccessToken:function(t){return e(y.setAccessToken(t))}}}))(j),E={getFilters:function(){return{type:h.b,payload:{promise:v.a.get("https://www.mocky.io/v2/5a25fade2e0000213aa90776")}}},setFilter:function(e,t){return{type:h.d,payload:{field:e,value:t}}}},k=n(127),C=n.n(k),w=n(13),T=n.n(w),P=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(O.a)(n)),n}return Object(f.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){var t=this.props,n=t.name;(0,t.setFilter)(n,{value:e})}},{key:"render",value:function(){var e=this.props.filter;if(!e)return null;var t=T.a.get(e,"validation.min",null),n=T.a.get(e,"validation.max",null),a=t&&n;return r.a.createElement("div",{className:"filter-container",id:"limit-filter-container"},r.a.createElement("div",{className:"filter-name"},e&&e.name||""),r.a.createElement(C.a,{maxValue:n,minValue:t,disabled:!a,value:this.props.limitValue||t,onChange:this.handleChange}))}}]),t}(a.Component),F=n(134),N=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(O.a)(n)),n}return Object(f.a)(t,e),Object(o.a)(t,[{key:"getOptions",value:function(){return this.props.filter.values.map((function(e){return{label:e.name,value:e.value}}))}},{key:"handleChange",value:function(e){var t=this.props,n=t.name;(0,t.setFilter)(n,e)}},{key:"render",value:function(){var e=this.props.filter;return e?r.a.createElement("div",{className:"filter-container"},r.a.createElement("div",{className:"filter-name"},e&&e.name||""),r.a.createElement("div",null,r.a.createElement(F.a,{options:this.getOptions(),onChange:this.handleChange,classNamePrefix:"select-filter"}))):null}}]),t}(a.Component),_=n(128),D=n.n(_),L=n(100),S=n.n(L),I=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(O.a)(n)),n}return Object(f.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){var t=this.props,n=t.name,a=t.setFilter,r=t.filter,i=T.a.get(r,"validation.pattern","dd/mm/yyyy");a(n,{value:S()(e).format(i.toUpperCase())})}},{key:"render",value:function(){var e=this.props,t=e.filter,n=e.value;if(!t)return null;var a=n?S()(n).toDate():null;return r.a.createElement("div",{className:"filter-container"},r.a.createElement("div",{className:"filter-name"},t&&t.name||""),r.a.createElement("div",null,r.a.createElement(D.a,{onChange:this.handleChange,selected:a})))}}]),t}(a.Component),U=n(135),x=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(O.a)(n)),n}return Object(f.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){var t=this.props,n=t.name;(0,t.setFilter)(n,{value:e})}},{key:"render",value:function(){var e=this.props.filter;return e?r.a.createElement("div",{className:"filter-container"},r.a.createElement("div",{className:"filter-name"},e&&e.name||""),r.a.createElement("div",null,r.a.createElement(U.a,{onChange:this.handleChange}))):null}}]),t}(a.Component),A=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(O.a)(n)),n}return Object(f.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){var t=e.target.value,n=this.props,a=n.name;(0,n.setFilter)(a,t)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("input",{onChange:this.handleChange}))}}]),t}(a.Component),R=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getFilters()}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,a=n.accessToken,r=n.filters,i=n.fetchPlaylists,c=r.values,l=e.filters.values;!T.a.isEqual(c,l)&&i(a,c)}},{key:"render",value:function(){var e=this.props,t=e.filters,n=e.setFilter;return r.a.createElement("div",{className:"filters-container"},r.a.createElement(P,{filter:t.limit,limitValue:T.a.get(t,"values.limit.value",null),setFilter:n,name:"limit"}),r.a.createElement(N,{filter:t.locale,setFilter:n,name:"locale"}),r.a.createElement(N,{filter:t.country,setFilter:n,name:"country"}),r.a.createElement(I,{filter:t.timestamp,setFilter:n,value:T.a.get(t,"values.timestamp.value",null),name:"timestamp"}),r.a.createElement(x,{filter:t.offset,setFilter:n,name:"offset"}),r.a.createElement("div",{className:"filter-container"},r.a.createElement("div",{className:"filter-name"},"Nome"),r.a.createElement(A,{setFilter:n,name:"name"})))}}]),t}(a.Component);var V=Object(p.b)((function(e){return{accessToken:e.spotify.accessToken,filters:e.filters}}),(function(e){return{getFilters:function(){return e(E.getFilters())},setFilter:function(t,n){return e(E.setFilter(t,n))},fetchPlaylists:function(t,n){return e(y.fetchFeaturedPlaylists(t,n))}}}))(R),q=n(267),B=n(268),G=n(269),J=n(270),M=n(271),W=n(272),z=function(e){return T.a.get(e,"images[0].url","")},Y=function(e){var t=e.playlist;return t&&r.a.createElement("div",{className:"playlists-container"},r.a.createElement(q.a,{body:!0,inverse:!0,className:"playlist-card"},r.a.createElement(B.a,{top:!0,width:"100%",src:z(t),alt:"Card image cap"}),r.a.createElement(G.a,null,r.a.createElement(J.a,null,function(e){return T.a.get(e,"name","")}(t)),r.a.createElement(M.a,null,function(e){return T.a.get(e,"owner.display_name","")}(t)),r.a.createElement(W.a,{onClick:function(){return window.open(function(e){return T.a.get(e,"external_urls.spotify","")}(t),"_blank")},variant:"primary"},"Go to playlist"))))},H=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(o.a)(t,[{key:"renderPlaylists",value:function(){var e=this.props,t=e.playlists,n=e.filters;return(T.a.get(n,"name")?t.filter((function(e){return function(e,t){var n=e.name.toUpperCase(),a=t.toUpperCase();return n.includes(a)}(e,n.name)})):t).map((function(e){return r.a.createElement(Y,{playlist:e,key:T.a.uniq(e.name)})}))}},{key:"fetchPlaylists",value:function(){var e=this.props,t=e.accessToken;(0,e.fetchFeaturedPlaylists)(t,e.filters)}},{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){return e.fetchPlaylists()}),3e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props,t=e.accessToken,n=e.playlists;return t&&0===n.length&&this.fetchPlaylists(),r.a.createElement("div",{className:"playlists-list"},this.renderPlaylists())}}]),t}(a.Component);var K=Object(p.b)((function(e){return{accessToken:e.spotify.accessToken,playlists:e.spotify.playlists,filters:e.filters.values}}),(function(e){return{fetchFeaturedPlaylists:function(t,n){return e(y.fetchFeaturedPlaylists(t,n))}}}))(H),$=n(133),Q=n.n($),X=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"header-container"},r.a.createElement("img",{src:Q.a,alt:"logo"}))}}]),t}(a.PureComponent),Z=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,{store:m.a},r.a.createElement("div",{className:"App"},r.a.createElement(X,null),r.a.createElement(V,null),r.a.createElement(g,null),r.a.createElement(K,null)))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},44:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c}));var a,r=function(e){return e.substring(1).split("&").reduce((function(e,t){if(t){var n=t.split("=");e[n[0]]=decodeURIComponent(n[1])}return e}),{})},i=(a="id",function(e){return e.reduce((function(e,t){return e[t[a]]=t,e}),{})}),c=function(e){return e&&Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t].value)})).join("&")}}},[[137,1,2]]]);
//# sourceMappingURL=main.e59a3f43.chunk.js.map