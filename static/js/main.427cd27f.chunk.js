(window.webpackJsonpspotifood=window.webpackJsonpspotifood||[]).push([[0],{130:function(e,t,n){"use strict";(function(e){var a=n(135),r=Object(a.a)(e);t.a=r}).call(this,n(54))},135:function(e,t,n){"use strict";var a=n(34),r=n(131),i=n(132),c=n(3),l=n(13),s=n.n(l),o=n(20),u=n(44);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m={values:{}};function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v={accessToken:null,playlists:[]},y=Object(a.c)({filters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"".concat(o.b,"_FULFILLED"):var n=s.a.get(t,"payload.data.filters",m.filters);return p({},e,{},Object(u.a)(n));case o.d:var a=t.payload,r=a.field,i=a.value;return p({},e,{values:p({},e.values,Object(c.a)({},r,i))});default:return p({},e)}},spotify:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.c:return d({},e,{accessToken:t.payload.token});case"".concat(o.a,"_FULFILLED"):var n=s.a.get(t.payload,"data.playlists.items",[]);return d({},e,{playlists:n});default:return d({},e)}}});t.a=function(){return Object(a.d)(Object(a.a)(r.a,i.a))(a.e)(y)}},136:function(e,t,n){e.exports=n(261)},141:function(e,t,n){},20:function(e){e.exports=JSON.parse('{"b":"GET_TRENDING_PLAYLISTS_FILTERS","c":"SET_ACCESS_TOKEN","d":"SET_FILTER","a":"FETCH_FEATURED_PLAYLISTS"}')},261:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(21),c=n.n(i),l=(n(141),n(7)),s=n(8),o=n(9),u=n(10),f=n(11),p=n(33),m=n(20),h=n(61),d=n.n(h),v=n(44),y={setAccessToken:function(e){return{type:m.c,payload:{token:e}}},fetchFeaturedPlaylists:function(e,t){var n={Authorization:"Bearer ".concat(e)},a=Object(v.b)(t),r="".concat("https://api.spotify.com/v1/browse/featured-playlists","?").concat(a);return{type:m.a,payload:{promise:d.a.get(r,{headers:n})}}}},b=n(1),O=n(2),g=n.n(O),j=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).clearExpiredToken=n.clearExpiredToken.bind(Object(b.a)(n)),n}return Object(f.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.accessToken,t=Object(v.c)(window.location.hash),n=t.access_token,a=t.expires_in;!e&&n&&this.props.setAccessToken(n),a&&setTimeout(this.clearExpiredToken,a)}},{key:"clearExpiredToken",value:function(){this.props.setAccessToken(null)}},{key:"getLoginURL",value:function(){return"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("91a84a82e4e34192a860659488ce3ecf","&redirect_uri=").concat("http://localhost:3000","&response_type=token&show_dialog=true")}},{key:"render",value:function(){return!this.props.accessToken&&r.a.createElement("div",{className:"login-container"},r.a.createElement("span",{className:"login-request"},"Please log in using your Spotify account to be able to see the playlists "),r.a.createElement("a",{href:this.getLoginURL(),className:"button"},"Login"))}}]),t}(a.Component);j.propType={getLoginUrl:g.a.func.isRequired};var E=Object(p.b)((function(e){return{accessToken:e.spotify.accessToken}}),(function(e){return{setAccessToken:function(t){return e(y.setAccessToken(t))}}}))(j),k={getFilters:function(){return{type:m.b,payload:{promise:d.a.get("http://www.mocky.io/v2/5a25fade2e0000213aa90776")}}},setFilter:function(e,t){return{type:m.d,payload:{field:e,value:t}}}},C=n(124),w=n.n(C),T=n(13),F=n.n(T),P=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(b.a)(n)),n}return Object(f.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){var t=this.props,n=t.name;(0,t.setFilter)(n,{value:e})}},{key:"render",value:function(){var e=this.props.filter;if(!e)return null;var t=F.a.get(e,"validation.min",null),n=F.a.get(e,"validation.max",null),a=t&&n;return r.a.createElement(w.a,{maxValue:n,minValue:t,disabled:!a,value:this.props.limitValue||t,onChange:this.handleChange})}}]),t}(a.Component),N=n(133),_=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(b.a)(n)),n}return Object(f.a)(t,e),Object(s.a)(t,[{key:"getOptions",value:function(){return this.props.filter.values.map((function(e){return{label:e.name,value:e.value}}))}},{key:"handleChange",value:function(e){var t=this.props,n=t.name;(0,t.setFilter)(n,e)}},{key:"render",value:function(){return this.props.filter?r.a.createElement("div",null,r.a.createElement(N.a,{options:this.getOptions(),onChange:this.handleChange,classNamePrefix:"select-filter"})):null}}]),t}(a.Component),L=n(125),D=n.n(L),S=n(100),R=n.n(S),U=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(b.a)(n)),n}return Object(f.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){var t=this.props,n=t.name,a=t.setFilter,r=t.filter,i=F.a.get(r,"validation.pattern","dd/mm/yyyy");a(n,{value:R()(e).format(i.toUpperCase())})}},{key:"render",value:function(){var e=this.props,t=e.filter,n=e.value;if(!t)return null;var a=n?R()(n).toDate():null;return r.a.createElement("div",null,r.a.createElement(D.a,{onChange:this.handleChange,selected:a}))}}]),t}(a.Component),I=n(134),x=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(b.a)(n)),n}return Object(f.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){var t=this.props,n=t.name;(0,t.setFilter)(n,{value:e})}},{key:"render",value:function(){return this.props.filter?r.a.createElement("div",null,r.a.createElement(I.a,{onChange:this.handleChange})):null}}]),t}(a.Component);x.protoTypes={setFilter:g.a.func.isRequired,name:g.a.string.isRequired};var A=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(b.a)(n)),n}return Object(f.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){var t=e.target.value,n=this.props,a=n.name;(0,n.setFilter)(a,t)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("input",{onChange:this.handleChange}))}}]),t}(a.Component);A.protoTypes={setFilter:g.a.func.isRequired,name:g.a.string.isRequired};var q=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.getFilters()}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,a=n.accessToken,r=n.filters,i=n.fetchPlaylists,c=r.values,l=e.filters.values;!F.a.isEqual(c,l)&&i(a,c)}},{key:"render",value:function(){var e=this.props,t=e.filters,n=e.setFilter,a=t.limit,i=t.locale,c=t.country,l=t.timestamp,s=t.offset;return r.a.createElement("div",{className:"filters-container"},r.a.createElement("div",{className:"filter-container",id:"limit-filter-container"},r.a.createElement("div",{className:"filter-name"},a&&a.name||""),r.a.createElement(P,{filter:t.limit,limitValue:F.a.get(t,"values.limit.value",null),setFilter:n,name:"limit"})),r.a.createElement("div",{className:"filter-container"},r.a.createElement("div",{className:"filter-name"},i&&i.name||""),r.a.createElement(_,{filter:t.locale,setFilter:n,name:"locale"})),r.a.createElement("div",{className:"filter-container"},r.a.createElement("div",{className:"filter-name"},c&&c.name||""),r.a.createElement(_,{filter:t.country,setFilter:n,name:"country"})),r.a.createElement("div",{className:"filter-container"},r.a.createElement("div",{className:"filter-name"},l&&l.name||""),r.a.createElement(U,{filter:t.timestamp,setFilter:n,value:F.a.get(t,"values.timestamp.value",null),name:"timestamp"})),r.a.createElement("div",{className:"filter-container"},r.a.createElement("div",{className:"filter-name"},s&&s.name||""),r.a.createElement(x,{filter:t.offset,setFilter:n,name:"offset"})),r.a.createElement("div",{className:"filter-container"},r.a.createElement("div",{className:"filter-name"},"Nome"),r.a.createElement(A,{setFilter:n,name:"name"})))}}]),t}(a.Component);var V=Object(p.b)((function(e){return{accessToken:e.spotify.accessToken,filters:e.filters}}),(function(e){return{getFilters:function(){return e(k.getFilters())},setFilter:function(t,n){return e(k.setFilter(t,n))},fetchPlaylists:function(t,n){return e(y.fetchFeaturedPlaylists(t,n))}}}))(q),B=n(266),G=n(267),J=n(268),M=n(269),W=n(270),z=n(271),Y=function(e){return F.a.get(e,"images[0].url","")},H=function(e){var t=e.playlist;return t&&r.a.createElement("div",{className:"playlists-container"},r.a.createElement(B.a,{body:!0,inverse:!0,className:"playlist-card"},r.a.createElement(G.a,{top:!0,width:"100%",src:Y(t),alt:"Card image cap"}),r.a.createElement(J.a,null,r.a.createElement(M.a,null,function(e){return F.a.get(e,"name","")}(t)),r.a.createElement(W.a,null,function(e){return F.a.get(e,"owner.display_name","")}(t)),r.a.createElement(z.a,{onClick:function(){return window.open(function(e){return F.a.get(e,"external_urls.spotify","")}(t),"_blank")},variant:"primary"},"Go to playlist"))))},K=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(s.a)(t,[{key:"renderPlaylists",value:function(){var e=this.props,t=e.playlists,n=e.filters;return(F.a.get(n,"name")?t.filter((function(e){return function(e,t){var n=e.name.toUpperCase(),a=t.toUpperCase();return n.includes(a)}(e,n.name)})):t).map((function(e){return r.a.createElement(H,{playlist:e,key:F.a.uniq(e.name)})}))}},{key:"fetchPlaylists",value:function(){var e=this.props,t=e.accessToken;(0,e.fetchFeaturedPlaylists)(t,e.filters)}},{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){return e.fetchPlaylists()}),3e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props,t=e.accessToken,n=e.playlists;return t&&0===n.length&&this.fetchPlaylists(),r.a.createElement("div",{className:"playlists-list"},this.renderPlaylists())}}]),t}(a.Component);var $=Object(p.b)((function(e){return{accessToken:e.spotify.accessToken,playlists:e.spotify.playlists,filters:e.filters.values}}),(function(e){return{fetchFeaturedPlaylists:function(t,n){return e(y.fetchFeaturedPlaylists(t,n))}}}))(K),Q=n(130),X=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,{store:Q.a},r.a.createElement("div",{className:"App"},r.a.createElement(V,null),r.a.createElement(E,null),r.a.createElement($,null)))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(X,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},44:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c}));var a,r=function(e){return e.substring(1).split("&").reduce((function(e,t){if(t){var n=t.split("=");e[n[0]]=decodeURIComponent(n[1])}return e}),{})},i=(a="id",function(e){return e.reduce((function(e,t){return e[t[a]]=t,e}),{})}),c=function(e){return e&&Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t].value)})).join("&")}}},[[136,1,2]]]);
//# sourceMappingURL=main.427cd27f.chunk.js.map